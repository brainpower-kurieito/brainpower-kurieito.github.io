/*! For license information please see app.js.LICENSE.txt */
!function(){"use strict";var t,e={258:function(t,e,i){var s=i(260),n=i.n(s);class o extends n().GameObjects.Text{constructor(t,e,i,s,n,o){super(t,e,i,s,n),this.setInteractive({useHandCursor:!0}).on("pointerdown",(()=>this.enterButtonActiveState())).on("pointerover",(()=>this.enterButtonHoverState())).on("pointerout",(()=>this.enterButtonRestState())).on("pointerup",(()=>{this.enterButtonHoverState(),o()}))}enterButtonHoverState(){this.setStyle({fill:"#ff0"})}enterButtonRestState(){this.setStyle({fill:"#0f0"})}enterButtonActiveState(){this.setStyle({fill:"#0ff"})}}var a=class extends n().Scene{constructor(){super({key:"TitleScene"})}preload(){this.load.image("title","assets/images/title.png")}create(){const t=this.game.config.width,e=this.game.config.height,i=this.add.image(t/2,e/2,"title");i.setScale(t/i.width,e/i.height);const s=new o(this,t/2,e/1.5,"START",{fill:"#000"},(()=>this.scene.start("DoraScene")));this.add.existing(s)}},r=class extends n().Scene{constructor(){super({key:"ResultScene"})}create(t){const e=this.game.config.width,i=this.game.config.height,s="score"in t?t.score:0;this.add.text(e/2,i/5,"score: "+s,{fill:"#fff"}),this.add.text(e/2,i/4,"いかがでしたか？",{fill:"#fff"}).setFontSize(32);const n=new o(this,e/2,i/1.8,"ツイートで共有",{fill:"#fff"},(()=>this.tweetScore(s)));this.add.existing(n);const a=new o(this,e/2,i/1.5,"BACK TO TITLE",{fill:"#fff"},(()=>this.scene.start("TitleScene")));this.add.existing(a)}tweetScore(t){let e="https://twitter.com/intent/tweet";e+="?text=スコア："+t,e+="&hashtags=dorakue",window.open(e,"_blank")}};function h(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,l(t,e,"get"))}function l(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}var c=new WeakMap;class u extends n().GameObjects.Sprite{constructor(t,e,i,s){super(t,e,i,"kue",s),c.set(this,{writable:!0,value:-4}),this.setScale(.1)}faint(){this.destroy()}update(){var t,e,i;super.update(),this.x+=h(this,c),(0>this.x||800<this.x)&&(t=this,e=c,i=-1*h(this,c),function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,l(t,e,"set"),i),this.flipX=!this.flipX)}}function d(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,f(t,e,"get"))}function f(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}var p=new WeakMap,g=new WeakSet;class m{constructor(t){g.add(this),function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(this,"group",void 0),p.set(this,{writable:!0,value:void 0}),this.group=new(n().GameObjects.Group),t.add.existing(this.group),function(t,e,i){(function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}})(t,f(t,e,"set"),i)}(this,p,t)}spawn(t,e){if(!(this.group.getLength()>=5)){if(!t||!e){const[i,s]=function(t,e,i){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return i}(this,g,w).call(this);t??(t=i),e??(e=s)}const i=new u(d(this,p),t,e);d(this,p).add.existing(i),this.group.add(i)}}faint(t,e){let i=0;for(const s of this.group.getChildren())(s.x-t)**2+(s.y-e)**2<1e4&&(s.faint(),i++);return i}}function w(){return[Math.floor(800*Math.random()),Math.floor(600*Math.random())]}class v extends n().GameObjects.Sprite{constructor(t,e,i,s,n,o,a,r,h,l){super(t,e,i,"logo"),this.keys=s,this.setScale(n),this.pScale=n,this.x=e,this.y=i,this.collisionX=o-this.width*n/2,this.collisionY=a-this.height*n/2,this.doraSound=r,this.coolTime=1e3*h,this.speed=l,this.isRinging=!1,this.scene=t}ring(){this.isRinging=!0}ringComplete(){this.isRinging=!1}move(){this.isRinging||(this.keys.W.isDown&&(this.y-=this.speed),this.keys.S.isDown&&(this.y+=this.speed),this.keys.A.isDown&&(this.x-=this.speed),this.keys.D.isDown&&(this.x+=this.speed),this.y=Math.max(this.height*this.pScale/2,Math.min(this.y,this.collisionY)),this.x=Math.max(this.width*this.pScale/2,Math.min(this.x,this.collisionX)))}hitDora(){return this.isRinging?null:(this.ring(),this.doraSound.play(),this.scene.time.delayedCall(this.coolTime,this.ringComplete,[],this),[this.x,this.y])}}function x(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function y(t,e){return function(t,e){return e.get?e.get.call(t):e.value}(t,b(t,e,"get"))}function S(t,e,i){return function(t,e,i){if(e.set)e.set.call(t,i);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=i}}(t,b(t,e,"set"),i),i}function b(t,e,i){if(!e.has(t))throw new TypeError("attempted to "+i+" private field on non-instance");return e.get(t)}var k=new WeakMap,T=new WeakMap,_=new WeakMap,C=class extends n().Scene{constructor(){super({key:"DoraScene"}),x(this,"keys",void 0),x(this,"logo",void 0),k.set(this,{writable:!0,value:void 0}),T.set(this,{writable:!0,value:0}),_.set(this,{writable:!0,value:void 0})}preload(){this.load.image("sky","http://labs.phaser.io/assets/skies/space3.png"),this.load.image("red","http://labs.phaser.io/assets/particles/red.png"),this.load.image("logo","assets/images/china_dora_tamtam_ipo.png"),this.load.image("kue","assets/images/fish_kue2.png"),this.load.audio("theme","assets/audio/DORAKUEloop.ogg"),this.load.audio("doraSound","assets/audio/effects/dorakick_0.ogg")}create(){this.backGround=this.add.image(400,300,"sky"),this.sound.add("theme",{volume:.4}).play(),this._score=0,this._timeCounter=0,this._leftTimeMS=63e3,this._leftTimeText=this.add.text(300,16,"Time: "+this._leftTimeMS,{fontSize:"28px",fill:"#FFF"}),this._scoreText=this.add.text(300,50,"Score: "+this._score,{fontSize:"28px",fill:"#FFF"}),this.keys=this.input.keyboard.addKeys("W,S,A,D"),this.spacebar=this.input.keyboard.addKey(n().Input.Keyboard.KeyCodes.SPACE);const t=this.game.config.width,e=this.game.config.height,i=this.sound.add("doraSound",{volume:.7});S(this,_,new v(this,t/2,e/2,this.keys,.1,t,e,i,.7,5)),this.add.existing(y(this,_)),S(this,k,new m(this)),y(this,k).spawn(100,100),y(this,k).group.runChildUpdate=!0,this.setCamera(t,e)}update(t,e){y(this,_).move();const i=y(this,_),s=y(this,k);if(n().Input.Keyboard.JustDown(this.spacebar)){const t=i.hitDora();if(null!=t){const[e,i]=t;this._score+=s.faint(e,i)}}S(this,T,y(this,T)+e),y(this,T)>=2e3&&(y(this,k).spawn(),S(this,T,0),this.textCamera.ignore(y(this,k).group)),this._timeCounter+=this.time.elapsed,this._leftTimeMS-=e,this._leftTimeText.text="Time: "+Math.floor(this._leftTimeMS/1e3),this._scoreText.text="Score: "+this._score,0>=this._leftTimeMS&&(this._timeCounter=0,this.scene.start("ResultScene",{score:this._score}))}setCamera(t,e){this.textCamera=this.cameras.add(0,0,t,e),this.minimap=this.cameras.add(10,10,0,0).setZoom(.2).setName("mini"),this.minimap.setBackgroundColor(8772),this.minimap.scrollX=0,this.minimap.scrollY=0,this.cameras.main.ignore(this._leftTimeText),this.cameras.main.ignore(this._scoreText),this.minimap.ignore(this._leftTimeText),this.minimap.ignore(this._scoreText),this.textCamera.ignore(this.backGround),this.textCamera.ignore(y(this,_)),this.textCamera.ignore(y(this,k).group),this.cameras.main.setBounds(0,0,800,600),this.cameras.main.zoom=2,this.cameras.main.startFollow(y(this,_),!0)}},O={type:n().AUTO,width:800,height:600};const M=Object.assign(O,{scene:[a,C,r]});class D extends n().Game{constructor(){super(M)}}window.game=new D}},i={};function s(t){var n=i[t];if(void 0!==n)return n.exports;var o=i[t]={exports:{}};return e[t].call(o.exports,o,o.exports,s),o.exports}s.m=e,t=[],s.O=function(e,i,n,o){if(!i){var a=1/0;for(l=0;l<t.length;l++){i=t[l][0],n=t[l][1],o=t[l][2];for(var r=!0,h=0;h<i.length;h++)(!1&o||a>=o)&&Object.keys(s.O).every((function(t){return s.O[t](i[h])}))?i.splice(h--,1):(r=!1,o<a&&(a=o));r&&(t.splice(l--,1),e=n())}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[i,n,o]},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,{a:e}),e},s.d=function(t,e){for(var i in e)s.o(e,i)&&!s.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,o,a=i[0],r=i[1],h=i[2],l=0;for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(h)var c=h(s);for(e&&e(i);l<a.length;l++)o=a[l],s.o(t,o)&&t[o]&&t[o][0](),t[a[l]]=0;return s.O(c)},i=self.webpackChunkdorakue=self.webpackChunkdorakue||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var n=s.O(void 0,[260],(function(){return s(258)}));n=s.O(n)}();